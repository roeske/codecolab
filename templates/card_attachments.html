<!-- 
  Card Attachments:

    * Template for card attachments. Included wherever card attachments are shown.
    * Evaluated when card attachments are reloaded via ajax. 
-->
<div id="{{ card._id }}_card_attachments" class="card_attachments">
  <ul class="attachments structural">
    {% if card.attachments|length == 0 %}
      <p style="margin: 10px auto;">No attachments.</p>
    {% endif %}

    {% for file in card.attachments %}
      <li id="attachment_{{ file._id }}">
        <div>
          <div class="attachment">
            <a href="{{ file.url }}" data-lightbox="{{ file.filename }}">
              {% if file.is_image %}
                <p class="filename">{{ file.filename }}</p>
                <div style="text-align: center;">
                  <img class="image" style="max-height: 300px;" class="thumb" src="{{ file.url }}"/>
                </div>
              {% else %}
                <p style="float: left;" class="filename_notimage">{{ file.filename }}</p>
              {% endif %}
            </a>
          </div>
          <div {% if not file.is_image %} style="float: right;" {% endif %}
            class="buttons">
            <a class="btn mini_icon delete" data-attachment-id="{{ file._id }}" 
               style="float: right;" data-filename="{{ file.filename }}">
              <div>
                <p style="float: left;">Delete</p>
                <img style="float: left;" class="mini_icon" src="/assets/ic_trash.png" />
                <div class="clear"></div>
              </div>
            </a>
            <div class="clear"></div>
          </div>
          <div class="clear"></div>
        </div>
     </li>
     {% endfor %}
  </ul>
</div>

