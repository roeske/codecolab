<button id="__btn_set_due_date" type="button" class="btn btn-primary">
  Due Date
</button>

<div style="display: none; width: 300px; z-index: 2000;" id="__due_date_dialog" class="panel panel-default">
  <div class="panel-heading clearfix">Set Due Date <i class="pull-right glyphicon glyphicon-remove" id="__due_date_dialog_close"></i></div>
  <div class="panel-body">
    <div role="form">
      <div class="form-group">
        <label for="__due_date_time">Time</label>
        <input type="text" placeholder="hh:mm" name="time" class="form-control"
                id="__due_date_time" value="{{ card.due_time }}" />
      </div>

      <div class="form-group">
        <label for="__due_date_date">Date</label>
        <input type="text" placeholder="yy/mm/dd" name="date"
                id="__due_date_date" class="form-control" />
      </div>

      <div class="clearfix"></div>

      <div style="margin-top: 10px;" id="__inline_datepicker"></div>

      <div style="margin-top: 10px;"> 
        <button id="__due_date_clear_btn" class="btn btn-small">Clear</button>
        <button id="__due_date_save_btn" class="btn btn-small btn-primary">Save</button>
      </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
  $("#__due_date_dialog_close").click(function() {
    $("#__due_date_dialog").hide();
  });

  $("#__btn_set_due_date").click(function() {
      var that = this;
      $("#__due_date_dialog").toggle();
  });

  
  $("#__due_date_time").timepicker({
      selectOnBlur: true
  });

  $("#__inline_datepicker").datepicker({
      altField: "#__due_date_date",
      defaultDate: new Date( {{ card.due_date }} )
  });

  $("null").click(function() {
    $.get("", function(data) {
      // need to update this in the event the user
      // leaves it unspecified.
      $("#due_date_time").val(data['time']);
      $("#due_date_dialog").dialog("close");
      $("#due_date_timestamp").text(data.due_human);
    });
  });
});
</script>
